<!DOCTYPE html>
<html>
<head>
    <title>Students</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container mt-4">
    <h3>Student Management</h3>
    <form method="POST" class="row g-3">
        <input name="name" class="form-control" placeholder="Name" required>
        <input name="reg_no" class="form-control" placeholder="Reg No" required>
        <input name="year" class="form-control" placeholder="Year (1st/2nd/3rd BCA)" required>
        <input name="section" class="form-control" placeholder="Section">
        <input name="email" class="form-control" placeholder="Email">
        <input name="phone" class="form-control" placeholder="Phone">
        <button class="btn btn-dark">Add Student</button>
    </form>
    <input
  type="text"
  id="studentSearch"
  placeholder="Search student by name..."
  onkeyup="searchStudent()"
  style="padding:10px; width:300px; margin-bottom:15px;"
>

    <hr>
    <table class="table table-bordered">
        <tr>
            <th>Name</th><th>Year</th><th>Reg No</th><th>Action</th>
        </tr>
        {% for s in students %}
        <tr>
            <td>{{ s.name }}</td>
            <td>{{ s.year }}</td>
            <td>{{ s.reg_no }}</td>
            <td>
                <a href="/admin/students/delete/{{ s.id }}" class="btn btn-danger btn-sm">Delete</a>
            </td>
        </tr>
        {% endfor %}
    </table>
</div>
</body>
</html>

<table id="studentTable" border="1" width="100%">
    <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Reg No</th>
        <th>Year</th>
        <th>Section</th>
        <th>Email</th>
        <th>Phone</th>
        <th>Action</th>
    </tr>

    {% for student in students %}
    <tr>
        <td>{{ student.id }}</td>
        <td>{{ student.name }}</td>
        <td>{{ student.reg_no }}</td>
        <td>{{ student.year }}</td>
        <td>{{ student.section }}</td>
        <td>{{ student.email }}</td>
        <td>{{ student.phone }}</td>
        <td>
            <a href="/admin/students/delete/{{ student.id }}">Delete</a>
        </td>
    </tr>
    {% endfor %}
</table>

<!-- ðŸ”½ ADD THIS PART -->
<script>
function searchStudent() {
    let input = document.getElementById("studentSearch");
    let filter = input.value.toLowerCase();
    let table = document.getElementById("studentTable");
    let rows = table.getElementsByTagName("tr");

    for (let i = 1; i < rows.length; i++) {
        let nameCell = rows[i].getElementsByTagName("td")[1];
        if (nameCell) {
            let nameText = nameCell.textContent || nameCell.innerText;
            rows[i].style.display = nameText.toLowerCase().includes(filter)
                ? ""
                : "none";
        }
    }
}
</script>

</body>
</html>
